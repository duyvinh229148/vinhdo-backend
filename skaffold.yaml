apiVersion: skaffold/v4beta1
kind: Config
metadata:
  name: todo-service
build:
  artifacts:
  - image: my-skaffold-artifact-image
    docker:
      dockerfile: k8s/local.Dockerfile
    sync:
      manual:
        - src: 'dist/*.js'
          dest: '.'
        - src: 'dist/*.js.map'
          dest: '.'
        - src: 'dist/*.*'
          dest: '.'
deploy:
  helm:
    releases:
      - name: todo-service
        namespace: vinhdo
        chartPath: ./charts/application
        skipBuildDependencies: true
        setValueTemplates:
          image.repository: my-skaffold-artifact-image
          image.tag: latest
        setValues:
          image.pullPolicy: "IfNotPresent"

